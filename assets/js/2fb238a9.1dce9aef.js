"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6360],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>k});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=p(n),u=r,k=d["".concat(s,".").concat(u)]||d[u]||m[u]||l;return n?a.createElement(k,i(i({ref:t},c),{},{components:n})):a.createElement(k,i({ref:t},c))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[d]="string"==typeof e?e:r,i[1]=o;for(var p=2;p<l;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5722:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const l={},i="Context Variables",o={unversionedId:"lang/context-vars",id:"lang/context-vars",title:"Context Variables",description:"The following variables are available in different contexts of a contract's execution.",source:"@site/docs/lang/context-vars.mdx",sourceDirName:"lang",slug:"/lang/context-vars",permalink:"/cwscript-docs/docs/lang/context-vars",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/lang/context-vars.mdx",tags:[],version:"current",frontMatter:{},sidebar:"langSidebar",previous:{title:"Grammar",permalink:"/cwscript-docs/docs/lang/grammar/"},next:{title:"Contracts",permalink:"/cwscript-docs/docs/lang/contracts"}},s={},p=[{value:"<code>$</code> - This Contract",id:"---this-contract",level:2},{value:"<code>$state</code> - Contract State",id:"state---contract-state",level:2},{value:"<code>$env</code> - Environment",id:"env---environment",level:2},{value:"<code>$info</code> - Message Info",id:"info---message-info",level:2},{value:"<code>$response</code> - Contract Response",id:"response---contract-response",level:2},{value:"<code>$data</code> - SubMsg Data",id:"data---submsg-data",level:2},{value:"<code>$events</code> - SubMsg Events",id:"events---submsg-events",level:2},{value:"<code>$error</code> - SubMsg Error",id:"error---submsg-error",level:2}],c={toc:p},d="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"context-variables"},"Context Variables"),(0,r.kt)("p",null,"The following variables are available in different contexts of a contract's execution."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Variable"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"th"},"instantiate")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"th"},"exec")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"th"},"query")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"th"},"reply.on_success")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"th"},"reply.on_error")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$")),(0,r.kt)("td",{parentName:"tr",align:null},'"This Contract"'),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$state")),(0,r.kt)("td",{parentName:"tr",align:null},"Contract State"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2611\ufe0f (readonly)"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$env")),(0,r.kt)("td",{parentName:"tr",align:null},"Environment"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$info")),(0,r.kt)("td",{parentName:"tr",align:null},"Message Info"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$response")),(0,r.kt)("td",{parentName:"tr",align:null},"Contract Response"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$data")),(0,r.kt)("td",{parentName:"tr",align:null},"SubMsg Data"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$events")),(0,r.kt)("td",{parentName:"tr",align:null},"SubMsg Events"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$error")),(0,r.kt)("td",{parentName:"tr",align:null},"SubMsg Error"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705")))),(0,r.kt)("h2",{id:"---this-contract"},(0,r.kt)("inlineCode",{parentName:"h2"},"$")," - This Contract"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"$")," variable is a reference to the contract instance itself."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cwscript"},"const $: Instance<...>\n")),(0,r.kt)("p",null,"The most common use case for ",(0,r.kt)("inlineCode",{parentName:"p"},"$")," is to make queries or call contract ",(0,r.kt)("inlineCode",{parentName:"p"},"exec")," messages against the current contract instance."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cwscript"},"query! $.balance(...)\nexec! $.another_exec_msg(...)\n")),(0,r.kt)("h2",{id:"state---contract-state"},(0,r.kt)("inlineCode",{parentName:"h2"},"$state")," - Contract State"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"$state")," variable is a reference to the contract state, so its structure will vary depending on the contract.\nIt is available in all special contexts, but read-only in the ",(0,r.kt)("inlineCode",{parentName:"p"},"query")," context."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cwscript"},"const $state: ContractState<...>\n")),(0,r.kt)("h2",{id:"env---environment"},(0,r.kt)("inlineCode",{parentName:"h2"},"$env")," - Environment"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"$env")," variable is a reference to the current contract's environment, which contains information about the current block, transaction, and contract."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cwscript"},"const $env: struct Env {\n  block: struct BlockInfo {\n    height: Uint64,\n    time: Uint64,\n    chain_id: String\n  },\n  transaction: struct TransactionInfo {\n    index: Uint32,\n  }?,\n  contract: struct ContractInfo {\n    address: Address\n  },\n}\n")),(0,r.kt)("h2",{id:"info---message-info"},(0,r.kt)("inlineCode",{parentName:"h2"},"$info")," - Message Info"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"$info")," variable provides information about the transactional message used to invoke a contract state-mutating entrypoint.\nIt is only available in the ",(0,r.kt)("inlineCode",{parentName:"p"},"instantiate")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"exec")," contexts."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cwscript"},"const $info: struct MessageInfo {\n  sender: Address,\n  funds: Coins,\n}\n")),(0,r.kt)("h2",{id:"response---contract-response"},(0,r.kt)("inlineCode",{parentName:"h2"},"$response")," - Contract Response"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"$response")," variable is a mutable reference to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Response")," of the current contract invocation.\nIt is only available in the ",(0,r.kt)("inlineCode",{parentName:"p"},"instantiate"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"exec"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"reply.on_success"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"reply.on_error")," contexts."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cwscript"},"let $response: struct Response {\n  messages: ExecMsg[],\n  events: Event[],\n  data: Bytes?,\n}\n")),(0,r.kt)("h2",{id:"data---submsg-data"},(0,r.kt)("inlineCode",{parentName:"h2"},"$data")," - SubMsg Data"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"$data")," variable is a reference to the ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," field of submessage's ",(0,r.kt)("inlineCode",{parentName:"p"},"Response")," during ",(0,r.kt)("inlineCode",{parentName:"p"},"reply.on_success")," context."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cwscript"},"const $data: Bytes?\n")),(0,r.kt)("h2",{id:"events---submsg-events"},(0,r.kt)("inlineCode",{parentName:"h2"},"$events")," - SubMsg Events"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"$events")," variable is a reference to the ",(0,r.kt)("inlineCode",{parentName:"p"},"events")," field of submessage's ",(0,r.kt)("inlineCode",{parentName:"p"},"Response")," during ",(0,r.kt)("inlineCode",{parentName:"p"},"reply.on_success")," context."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cwscript"},"const $events: Event[]\n")),(0,r.kt)("h2",{id:"error---submsg-error"},(0,r.kt)("inlineCode",{parentName:"h2"},"$error")," - SubMsg Error"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"$error")," variable is a reference to the ",(0,r.kt)("inlineCode",{parentName:"p"},"error")," field of submessage's ",(0,r.kt)("inlineCode",{parentName:"p"},"Response")," during ",(0,r.kt)("inlineCode",{parentName:"p"},"reply.on_error")," context."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cwscript"},"const $error: Error\n")))}m.isMDXComponent=!0}}]);